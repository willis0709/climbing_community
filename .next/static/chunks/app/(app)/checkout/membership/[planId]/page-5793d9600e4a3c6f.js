(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8004],{157:(e,t,r)=>{"use strict";r.d(t,{A:()=>c});var a=r(2115);let s=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),n=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()};var i={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let l=(0,a.forwardRef)((e,t)=>{let{color:r="currentColor",size:s=24,strokeWidth:l=2,absoluteStrokeWidth:c,className:o="",children:d,iconNode:u,...m}=e;return(0,a.createElement)("svg",{ref:t,...i,width:s,height:s,stroke:r,strokeWidth:c?24*Number(l)/Number(s):l,className:n("lucide",o),...m},[...u.map(e=>{let[t,r]=e;return(0,a.createElement)(t,r)}),...Array.isArray(d)?d:[d]])}),c=(e,t)=>{let r=(0,a.forwardRef)((r,i)=>{let{className:c,...o}=r;return(0,a.createElement)(l,{ref:i,iconNode:t,className:n("lucide-".concat(s(e)),c),...o})});return r.displayName="".concat(e),r}},172:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(157).A)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},285:(e,t,r)=>{"use strict";r.d(t,{$:()=>o,r:()=>c});var a=r(5155),s=r(2115),n=r(9708),i=r(2085),l=r(9434);let c=(0,i.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=s.forwardRef((e,t)=>{let{className:r,variant:s,size:i,asChild:o=!1,...d}=e,u=o?n.DX:"button";return(0,a.jsx)(u,{className:(0,l.cn)(c({variant:s,size:i,className:r})),ref:t,...d})});o.displayName="Button"},1873:(e,t,r)=>{"use strict";r.d(t,{default:()=>f});var a=r(5155),s=r(2115),n=r(5695),i=r(285),l=r(6695),c=r(172),o=r(2543);let d=(0,r(157).A)("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);var u=r(6160),m=r(7481);let p=[{id:"basecamp-monthly",tier:"Base Camp",name:"Base Camp 基地會員 - 月繳",price:"NT$ 650/月",priceType:"monthly",iconName:"Star",features:[],cta:""},{id:"basecamp-annual",tier:"Base Camp",name:"Base Camp 基地會員 - 年繳",price:"NT$ 7,000/年",priceType:"annual",iconName:"Star",features:[],cta:""},{id:"crux-monthly",tier:"Crux",name:"Crux 核心會員 - 月繳",price:"NT$ 1,350/月",priceType:"monthly",iconName:"Gem",features:[],cta:""},{id:"crux-annual",tier:"Crux",name:"Crux 核心會員 - 年繳",price:"NT$ 14,000/年",priceType:"annual",iconName:"Gem",features:[],cta:""},{id:"summit-monthly",tier:"Summit",name:"Summit 頂峰會員 - 月繳",price:"NT$ 2,800/月",priceType:"monthly",iconName:"ShieldCheck",features:[],cta:""},{id:"summit-annual",tier:"Summit",name:"Summit 頂峰會員 - 年繳",price:"NT$ 30,000/年",priceType:"annual",iconName:"ShieldCheck",features:[],cta:""}];function f(e){let{planId:t}=e,r=(0,n.useRouter)(),{toast:f}=(0,m.dj)(),[h,x]=(0,s.useState)(null),[v,y]=(0,s.useState)(!1);(0,s.useEffect)(()=>{if(t){let e=p.find(e=>e.id===t);e?x(e):(f({title:"錯誤",description:"找不到選擇的方案。",variant:"destructive"}),r.push("/membership"))}},[t,r,f]);let N=async()=>{if(!h)return;y(!0),await new Promise(e=>setTimeout(e,2e3));let e=Math.random()>.3;y(!1),e?(f({title:"訂閱成功!",description:"您已成功訂閱 ".concat(h.name,"。"),variant:"default"}),r.push("/payment/success?planName=".concat(encodeURIComponent(h.name),"&price=").concat(encodeURIComponent(h.price)))):(f({title:"付款失敗",description:"訂閱 ".concat(h.name," 時發生問題，請再試一次。"),variant:"destructive"}),r.push("/payment/failure?planName=".concat(encodeURIComponent(h.name))))};return h?(0,a.jsx)("div",{className:"container mx-auto py-8 max-w-lg",children:(0,a.jsxs)(l.Zp,{className:"shadow-xl",children:[(0,a.jsxs)(l.aR,{children:[(0,a.jsxs)(i.$,{variant:"ghost",size:"sm",onClick:()=>r.push("/membership"),className:"mb-4 self-start text-muted-foreground hover:text-foreground",children:[(0,a.jsx)(o.A,{className:"mr-2 h-4 w-4"})," 返回方案選擇"]}),(0,a.jsxs)(l.ZB,{className:"text-3xl font-bold flex items-center",children:[(0,a.jsx)(d,{className:"mr-3 h-8 w-8 text-primary"}),"訂閱結帳"]}),(0,a.jsxs)(l.BT,{children:["您即將訂閱 ",(0,a.jsx)("span",{className:"font-semibold text-primary",children:h.name}),"。"]})]}),(0,a.jsxs)(l.Wu,{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-muted/50 p-6 rounded-lg",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"方案詳情"}),(0,a.jsxs)("div",{className:"flex justify-between items-center mb-1",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"方案名稱:"}),(0,a.jsx)("span",{className:"font-medium",children:h.name})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"價格:"}),(0,a.jsx)("span",{className:"font-bold text-xl text-accent",children:h.price})]}),"annual"===h.priceType&&(0,a.jsx)("p",{className:"text-xs text-accent mt-1 text-right",children:"(年繳方案)"}),"monthly"===h.priceType&&(0,a.jsx)("p",{className:"text-xs text-accent mt-1 text-right",children:"(月繳方案)"})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold",children:"支付方式"}),(0,a.jsxs)("div",{className:"p-6 border border-dashed rounded-lg text-center text-muted-foreground",children:[(0,a.jsx)(u.A,{className:"h-12 w-12 mx-auto mb-2 text-gray-400"}),(0,a.jsx)("p",{className:"font-medium",children:"Stripe 支付表單將顯示於此"}),(0,a.jsx)("p",{className:"text-xs mt-1",children:"(此為原型，實際支付表單將在此處整合)"})]}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground text-center",children:"所有支付均通過 Stripe 安全處理。我們不會儲存您的信用卡資訊。"})]})]}),(0,a.jsxs)(l.wL,{className:"flex flex-col sm:flex-row gap-3",children:[(0,a.jsx)(i.$,{variant:"outline",onClick:()=>r.push("/membership"),className:"w-full sm:w-auto",disabled:v,children:"取消"}),(0,a.jsxs)(i.$,{onClick:N,disabled:v,className:"w-full sm:flex-1",children:[v?(0,a.jsx)(c.A,{className:"mr-2 h-4 w-4 animate-spin"}):(0,a.jsx)(u.A,{className:"mr-2 h-4 w-4"}),v?"處理中...":"確認支付 ".concat(h.price.split("/")[0])]})]})]})}):(0,a.jsx)("div",{className:"flex items-center justify-center min-h-[calc(100vh-8rem)]",children:(0,a.jsx)(c.A,{className:"h-12 w-12 animate-spin text-primary"})})}},2085:(e,t,r)=>{"use strict";r.d(t,{F:()=>i});var a=r(2596);let s=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,n=a.$,i=(e,t)=>r=>{var a;if((null==t?void 0:t.variants)==null)return n(e,null==r?void 0:r.class,null==r?void 0:r.className);let{variants:i,defaultVariants:l}=t,c=Object.keys(i).map(e=>{let t=null==r?void 0:r[e],a=null==l?void 0:l[e];if(null===t)return null;let n=s(t)||s(a);return i[e][n]}),o=r&&Object.entries(r).reduce((e,t)=>{let[r,a]=t;return void 0===a||(e[r]=a),e},{});return n(e,c,null==t||null==(a=t.compoundVariants)?void 0:a.reduce((e,t)=>{let{class:r,className:a,...s}=t;return Object.entries(s).every(e=>{let[t,r]=e;return Array.isArray(r)?r.includes({...l,...o}[t]):({...l,...o})[t]===r})?[...e,r,a]:e},[]),null==r?void 0:r.class,null==r?void 0:r.className)}},2543:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(157).A)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},3464:(e,t,r)=>{Promise.resolve().then(r.bind(r,1873))},5695:(e,t,r)=>{"use strict";var a=r(8999);r.o(a,"useParams")&&r.d(t,{useParams:function(){return a.useParams}}),r.o(a,"usePathname")&&r.d(t,{usePathname:function(){return a.usePathname}}),r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}}),r.o(a,"useSearchParams")&&r.d(t,{useSearchParams:function(){return a.useSearchParams}})},6160:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(157).A)("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]])},6695:(e,t,r)=>{"use strict";r.d(t,{BT:()=>o,Wu:()=>d,ZB:()=>c,Zp:()=>i,aR:()=>l,wL:()=>u});var a=r(5155),s=r(2115),n=r(9434);let i=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...s})});i.displayName="Card";let l=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",r),...s})});l.displayName="CardHeader";let c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",r),...s})});c.displayName="CardTitle";let o=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",r),...s})});o.displayName="CardDescription";let d=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",r),...s})});d.displayName="CardContent";let u=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",r),...s})});u.displayName="CardFooter"},7481:(e,t,r)=>{"use strict";r.d(t,{dj:()=>m});var a=r(2115);let s=0,n=new Map,i=e=>{if(n.has(e))return;let t=setTimeout(()=>{n.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e6);n.set(e,t)},l=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:r}=t;return r?i(r):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},c=[],o={toasts:[]};function d(e){o=l(o,e),c.forEach(e=>{e(o)})}function u(e){let{...t}=e,r=(s=(s+1)%Number.MAX_SAFE_INTEGER).toString(),a=()=>d({type:"DISMISS_TOAST",toastId:r});return d({type:"ADD_TOAST",toast:{...t,id:r,open:!0,onOpenChange:e=>{e||a()}}}),{id:r,dismiss:a,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:r}})}}function m(){let[e,t]=a.useState(o);return a.useEffect(()=>(c.push(t),()=>{let e=c.indexOf(t);e>-1&&c.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}},9434:(e,t,r)=>{"use strict";r.d(t,{cn:()=>n});var a=r(2596),s=r(9688);function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.QP)((0,a.$)(t))}}},e=>{var t=t=>e(e.s=t);e.O(0,[2848,8441,1684,7358],()=>t(3464)),_N_E=e.O()}]);