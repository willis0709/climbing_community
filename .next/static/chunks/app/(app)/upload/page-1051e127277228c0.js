(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5973],{2346:(e,t,s)=>{"use strict";s.d(t,{Separator:()=>d});var l=s(5155),a=s(2115),r=s(7489),i=s(9434);let d=a.forwardRef((e,t)=>{let{className:s,orientation:a="horizontal",decorative:d=!0,...n}=e;return(0,l.jsx)(r.b,{ref:t,decorative:d,orientation:a,className:(0,i.cn)("shrink-0 bg-border","horizontal"===a?"h-[1px] w-full":"h-full w-[1px]",s),...n})});d.displayName=r.b.displayName},2523:(e,t,s)=>{"use strict";s.d(t,{p:()=>i});var l=s(5155),a=s(2115),r=s(9434);let i=a.forwardRef((e,t)=>{let{className:s,type:a,...i}=e;return(0,l.jsx)("input",{type:a,className:(0,r.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:t,...i})});i.displayName="Input"},5057:(e,t,s)=>{"use strict";s.d(t,{Label:()=>o});var l=s(5155),a=s(2115),r=s(968),i=s(2085),d=s(9434);let n=(0,i.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,l.jsx)(r.b,{ref:t,className:(0,d.cn)(n(),s),...a})});o.displayName=r.b.displayName},6695:(e,t,s)=>{"use strict";s.d(t,{BT:()=>o,Wu:()=>c,ZB:()=>n,Zp:()=>i,aR:()=>d,wL:()=>u});var l=s(5155),a=s(2115),r=s(9434);let i=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,l.jsx)("div",{ref:t,className:(0,r.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...a})});i.displayName="Card";let d=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,l.jsx)("div",{ref:t,className:(0,r.cn)("flex flex-col space-y-1.5 p-6",s),...a})});d.displayName="CardHeader";let n=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,l.jsx)("div",{ref:t,className:(0,r.cn)("text-2xl font-semibold leading-none tracking-tight",s),...a})});n.displayName="CardTitle";let o=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,l.jsx)("div",{ref:t,className:(0,r.cn)("text-sm text-muted-foreground",s),...a})});o.displayName="CardDescription";let c=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,l.jsx)("div",{ref:t,className:(0,r.cn)("p-6 pt-0",s),...a})});c.displayName="CardContent";let u=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,l.jsx)("div",{ref:t,className:(0,r.cn)("flex items-center p-6 pt-0",s),...a})});u.displayName="CardFooter"},6810:(e,t,s)=>{"use strict";s.d(t,{UploadForm:()=>F});var l=s(5155),a=s(2115),r=s(2177),i=s(221),d=s(5594),n=s(285),o=s(2523),c=s(8539),u=s(5057),m=s(6695),p=s(9409),x=s(8376),f=s(3636),h=s(462),j=s(7082),v=s(172),g=s(7481),y=s(9022),b=s(6874),N=s.n(b),w=s(2346);let S=["V0","V1","V2","V3","V4","V5","V6","V7","V8","V9","V10+"],T=["抱石","上攀"],C=["Beginner (Up to 1 year)","Intermediate (1-3 years)","Advanced (3-5 years)","Expert (5+ years)"],R=["CORNER Bouldering Gym (台北市)","市民抱石攀岩館 (台北市)","奇岩攀岩館 (台北市)","double8岩究所 (台北市)","RedRock紅石攀岩 (台北市)","內湖運動中心攀岩館 (台北市)","原岩攀岩館 (萬華店)","原岩攀岩館 (南港店)","原岩攀岩館 (中和店)","原岩攀岩館 (明德店)","原岩攀岩館 A19 (桃園市)","MegaSTONE Climbing Gym (新北市)","Camp4 達文西攀岩館 (新北市)","永和運動中心攀岩館 (新北市)","久淘攀岩館 (新北市)","Wusa攀岩館 (新北市)","千手抱石 (桃園市)","Passion Climbing 爬森攀岩館 (桃園市)","新竹風城攀岩館 (新竹市)","新竹紅石攀岩館 (新竹市)","Dapro室內攀岩場 (台中市)","攀吶攀岩館 (台中市)","B-plus攀岩館 (台中市)","嗨翻綜合體能館 (台南市)","B-topia攀岩館 (高雄市)","抱石基地 (高雄市)","Boulder Space圓石空間攀岩場 (高雄市)","慶倡攀岩生活館 (高雄市)","久淘攀岩館 (宜蘭市)","Rockdance舞岩抱石攀岩館 (宜蘭市)"].sort((e,t)=>e.localeCompare(t,"zh-Hant")),V=["video/mp4","video/quicktime","video/x-msvideo","video/x-flv","video/webm","video/mpeg"],A=d.z.object({title:d.z.string().min(3,"標題至少需 3 個字元"),videoFile:d.z.any().refine(e=>null==e?void 0:e[0],"請選擇影片檔案").refine(e=>{var t;return(null==e||null==(t=e[0])?void 0:t.size)<=0x12c00000},"影片檔案大小不能超過 300MB。").refine(e=>{var t;return V.includes(null==e||null==(t=e[0])?void 0:t.type)},"不支援的影片格式。請上傳 MP4, MOV, AVI, FLV, WebM, 或 MPEG 格式的影片。"),location:d.z.string().min(1,"請選擇地點"),difficulty:d.z.string().min(1,"請選擇難度"),routeType:d.z.string().min(1,"請選擇路線類型"),description:d.z.string().optional(),climberExperience:d.z.string().optional()});function F(){let{toast:e}=(0,g.dj)(),[t,s]=(0,a.useState)(!1),[d,b]=(0,a.useState)(null),F=(0,a.useRef)(null),[E,I]=(0,a.useState)(null);(0,a.useEffect)(()=>{I(y.rB[0])},[]);let{control:M,handleSubmit:O,register:k,formState:{errors:B},watch:D,setValue:L,reset:_}=(0,r.mN)({resolver:(0,i.u)(A),defaultValues:{title:"",videoFile:null,location:"",difficulty:"",routeType:"",description:"",climberExperience:""}}),z=D("videoFile"),U=async t=>{var a;if(s(!0),!(null==(a=t.videoFile)?void 0:a[0])||!E){e({title:"錯誤",description:"影片檔案或使用者資訊遺失。",variant:"destructive"}),s(!1);return}let r=t.videoFile[0],i=new FileReader;i.onloadend=async()=>{let a=i.result;console.log("Mock Upload Data:",{...t,videoFileName:r.name}),await new Promise(e=>setTimeout(e,1500));let d={id:"video-".concat(Date.now()),title:t.title,thumbnailUrl:"https://placehold.co/600x400.png",dataAiHint:"uploaded video",uploader:{id:E.id,name:E.name,avatarUrl:E.avatarUrl},location:t.location,difficulty:t.difficulty,routeType:t.routeType,uploadDate:new Date().toISOString(),views:0,description:t.description,videoUrl:a,isExclusive:!1,comments:[],sponsors:[],totalSponsorship:0};y.Ti.unshift(d);let n=y.rB.find(e=>e.id===E.id);n&&(n.uploadedVideos?n.uploadedVideos.unshift(d):n.uploadedVideos=[d]),e({title:"影片上傳成功!",description:"「".concat(t.title,"」已上傳，現在應該會顯示在首頁和您的個人資料中。(此為原型模擬)"),action:(0,l.jsx)(x.A,{className:"text-green-500"})}),s(!1),_(),b(null),F.current&&(F.current.value="")},i.readAsDataURL(r)};return(0,l.jsxs)(m.Zp,{className:"w-full max-w-2xl mx-auto",children:[(0,l.jsxs)(m.aR,{children:[(0,l.jsxs)(m.ZB,{className:"text-2xl flex items-center",children:[(0,l.jsx)(f.A,{className:"mr-3 h-7 w-7 text-primary"})," 上傳攀岩影片"]}),(0,l.jsx)(m.BT,{children:"與社群分享您的攀登過程。"})]}),(0,l.jsxs)("form",{onSubmit:O(U),children:[(0,l.jsxs)(m.Wu,{className:"space-y-6",children:[(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(u.Label,{htmlFor:"title",children:"影片標題"}),(0,l.jsx)(o.p,{id:"title",...k("title"),placeholder:"例如：我的精彩紅點"}),B.title&&(0,l.jsx)("p",{className:"text-sm text-destructive",children:B.title.message})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(u.Label,{htmlFor:"videoFile",children:"影片檔案"}),(0,l.jsx)(o.p,{id:"videoFile",type:"file",accept:V.join(","),onChange:e=>{var t;let s=null==(t=e.target.files)?void 0:t[0];if(s)if(L("videoFile",e.target.files,{shouldValidate:!0}),s.size<=0x12c00000&&V.includes(s.type)){let e=new FileReader;e.onloadend=()=>{b(e.result)},e.readAsDataURL(s)}else b(null);else b(null),L("videoFile",null,{shouldValidate:!0})},ref:F}),(0,l.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"影片將會進行處理以優化播放體驗。檔案大小上限 300MB。支援格式：MP4, MOV, AVI, FLV, WebM, MPEG。"}),B.videoFile&&(0,l.jsx)("p",{className:"text-sm text-destructive",children:B.videoFile.message}),d&&(0,l.jsx)("div",{className:"mt-2 border rounded-md overflow-hidden",children:(0,l.jsx)("video",{src:d,controls:!0,className:"w-full aspect-video"})})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(u.Label,{htmlFor:"location",children:"地點"}),(0,l.jsx)(r.xI,{name:"location",control:M,render:e=>{let{field:t}=e;return(0,l.jsxs)(p.Select,{onValueChange:t.onChange,value:t.value||"",children:[(0,l.jsx)(p.SelectTrigger,{id:"location",children:(0,l.jsx)(p.SelectValue,{placeholder:"選擇地點"})}),(0,l.jsx)(p.SelectContent,{children:R.map(e=>(0,l.jsx)(p.SelectItem,{value:e,children:e},e))})]})}}),B.location&&(0,l.jsx)("p",{className:"text-sm text-destructive",children:B.location.message})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(u.Label,{htmlFor:"difficulty",children:"難度"}),(0,l.jsx)(r.xI,{name:"difficulty",control:M,render:e=>{let{field:t}=e;return(0,l.jsxs)(p.Select,{onValueChange:t.onChange,value:t.value||"",children:[(0,l.jsx)(p.SelectTrigger,{id:"difficulty",children:(0,l.jsx)(p.SelectValue,{placeholder:"選擇難度"})}),(0,l.jsx)(p.SelectContent,{children:S.map(e=>(0,l.jsx)(p.SelectItem,{value:e,children:e},e))})]})}}),B.difficulty&&(0,l.jsx)("p",{className:"text-sm text-destructive",children:B.difficulty.message})]})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(u.Label,{htmlFor:"routeType",children:"路線類型"}),(0,l.jsx)(r.xI,{name:"routeType",control:M,render:e=>{let{field:t}=e;return(0,l.jsxs)(p.Select,{onValueChange:t.onChange,value:t.value||"",children:[(0,l.jsx)(p.SelectTrigger,{id:"routeType",children:(0,l.jsx)(p.SelectValue,{placeholder:"選擇路線類型"})}),(0,l.jsx)(p.SelectContent,{children:T.map(e=>(0,l.jsx)(p.SelectItem,{value:e,children:e},e))})]})}}),B.routeType&&(0,l.jsx)("p",{className:"text-sm text-destructive",children:B.routeType.message})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(u.Label,{htmlFor:"climberExperience",children:"攀岩者經驗 (選填)"}),(0,l.jsx)(r.xI,{name:"climberExperience",control:M,render:e=>{let{field:t}=e;return(0,l.jsxs)(p.Select,{onValueChange:t.onChange,value:t.value||"",children:[(0,l.jsx)(p.SelectTrigger,{id:"climberExperience",children:(0,l.jsx)(p.SelectValue,{placeholder:"選擇經驗等級"})}),(0,l.jsx)(p.SelectContent,{children:C.map(e=>(0,l.jsx)(p.SelectItem,{value:e,children:e},e))})]})}})]})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(u.Label,{htmlFor:"description",children:"描述 (選填)"}),(0,l.jsx)(c.T,{id:"description",...k("description"),placeholder:"關於路線、狀況或您的攀登過程的筆記..."})]}),(0,l.jsx)(w.Separator,{}),(null==E?void 0:E.isMember)?(0,l.jsxs)(m.Zp,{className:"bg-accent/10 border-accent/30",children:[(0,l.jsxs)(m.aR,{children:[(0,l.jsxs)(m.ZB,{className:"text-lg flex items-center",children:[(0,l.jsx)(h.A,{className:"mr-2 h-5 w-5 text-accent"})," 會員功能"]}),(0,l.jsx)(m.BT,{children:"身為會員，您可以為您的影片請求專業教練的評論。"})]}),(0,l.jsxs)(m.Wu,{children:[(0,l.jsxs)(n.$,{type:"button",variant:"outline",className:"w-full",onClick:()=>{e({title:"Request Submitted (Mock)",description:"Your video has been submitted for professional coach review. You'll be notified within 2-3 business days."})},disabled:t,children:[(0,l.jsx)(j.A,{className:"mr-2 h-4 w-4"})," 請求專業教練評論 (模擬)"]}),(0,l.jsx)("p",{className:"text-xs text-muted-foreground mt-2 text-center",children:"回覆時間：2-3 個工作天。次數限制可能依會員等級而定。"})]})]}):(0,l.jsxs)(m.Zp,{className:"bg-muted/50",children:[(0,l.jsxs)(m.aR,{children:[(0,l.jsxs)(m.ZB,{className:"text-lg flex items-center",children:[(0,l.jsx)(h.A,{className:"mr-2 h-5 w-5 text-primary"})," 解鎖更多功能！"]}),(0,l.jsx)(m.BT,{children:"成為 Climbers Community 會員以享受專屬福利，例如專業教練評論。"})]}),(0,l.jsxs)(m.Wu,{className:"space-y-2",children:[(0,l.jsxs)("ul",{className:"list-disc list-inside text-sm text-muted-foreground space-y-1",children:[(0,l.jsx)("li",{children:"專業教練評論與詳細回饋"}),(0,l.jsx)("li",{children:"觀看會員專屬影片與進階訓練資源"})]}),(0,l.jsx)("div",{className:"pt-2",children:(0,l.jsx)(N(),{href:"/membership",passHref:!0,legacyBehavior:!0,children:(0,l.jsx)(n.$,{variant:"default",className:"w-full",children:"了解更多並加入"})})})]})]})]}),(0,l.jsx)(m.wL,{className:"flex flex-col items-stretch gap-4",children:(0,l.jsxs)(n.$,{type:"submit",disabled:t||!(null==z?void 0:z[0]),className:"w-full",children:[t?(0,l.jsx)(v.A,{className:"mr-2 h-4 w-4 animate-spin"}):(0,l.jsx)(f.A,{className:"mr-2 h-4 w-4"}),t?"上傳中...":"上傳影片"]})})]})]})}},7481:(e,t,s)=>{"use strict";s.d(t,{dj:()=>m});var l=s(2115);let a=0,r=new Map,i=e=>{if(r.has(e))return;let t=setTimeout(()=>{r.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);r.set(e,t)},d=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?i(s):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},n=[],o={toasts:[]};function c(e){o=d(o,e),n.forEach(e=>{e(o)})}function u(e){let{...t}=e,s=(a=(a+1)%Number.MAX_SAFE_INTEGER).toString(),l=()=>c({type:"DISMISS_TOAST",toastId:s});return c({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:e=>{e||l()}}}),{id:s,dismiss:l,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:s}})}}function m(){let[e,t]=l.useState(o);return l.useEffect(()=>(n.push(t),()=>{let e=n.indexOf(t);e>-1&&n.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},8109:(e,t,s)=>{Promise.resolve().then(s.bind(s,6810))},8539:(e,t,s)=>{"use strict";s.d(t,{T:()=>i});var l=s(5155),a=s(2115),r=s(9434);let i=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,l.jsx)("textarea",{className:(0,r.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:t,...a})});i.displayName="Textarea"},9409:(e,t,s)=>{"use strict";s.d(t,{Select:()=>c,SelectContent:()=>f,SelectItem:()=>h,SelectTrigger:()=>m,SelectValue:()=>u});var l=s(5155),a=s(2115),r=s(1992),i=s(9556),d=s(7381),n=s(518),o=s(9434);let c=r.bL;r.YJ;let u=r.WT,m=a.forwardRef((e,t)=>{let{className:s,children:a,...d}=e;return(0,l.jsxs)(r.l9,{ref:t,className:(0,o.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",s),...d,children:[a,(0,l.jsx)(r.In,{asChild:!0,children:(0,l.jsx)(i.A,{className:"h-4 w-4 opacity-50"})})]})});m.displayName=r.l9.displayName;let p=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,l.jsx)(r.PP,{ref:t,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",s),...a,children:(0,l.jsx)(d.A,{className:"h-4 w-4"})})});p.displayName=r.PP.displayName;let x=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,l.jsx)(r.wn,{ref:t,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",s),...a,children:(0,l.jsx)(i.A,{className:"h-4 w-4"})})});x.displayName=r.wn.displayName;let f=a.forwardRef((e,t)=>{let{className:s,children:a,position:i="popper",...d}=e;return(0,l.jsx)(r.ZL,{children:(0,l.jsxs)(r.UC,{ref:t,className:(0,o.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===i&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:i,...d,children:[(0,l.jsx)(p,{}),(0,l.jsx)(r.LM,{className:(0,o.cn)("p-1","popper"===i&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:a}),(0,l.jsx)(x,{})]})})});f.displayName=r.UC.displayName,a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,l.jsx)(r.JU,{ref:t,className:(0,o.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",s),...a})}).displayName=r.JU.displayName;let h=a.forwardRef((e,t)=>{let{className:s,children:a,...i}=e;return(0,l.jsxs)(r.q7,{ref:t,className:(0,o.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...i,children:[(0,l.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,l.jsx)(r.VF,{children:(0,l.jsx)(n.A,{className:"h-4 w-4"})})}),(0,l.jsx)(r.p4,{children:a})]})});h.displayName=r.q7.displayName,a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,l.jsx)(r.wv,{ref:t,className:(0,o.cn)("-mx-1 my-1 h-px bg-muted",s),...a})}).displayName=r.wv.displayName}},e=>{var t=t=>e(e.s=t);e.O(0,[2848,6874,7576,5756,2650,1859,4568,1394,8441,1684,7358],()=>t(8109)),_N_E=e.O()}]);